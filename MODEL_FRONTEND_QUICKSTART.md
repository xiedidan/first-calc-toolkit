# 模型管理前端 - 快速开始

> 如何使用模型管理前端界面

---

## 🚀 启动应用

### 1. 启动后端服务

```bash
# 在项目根目录
.\scripts\dev-start-backend.ps1
```

### 2. 启动前端服务

```bash
cd frontend
npm run dev
```

### 3. 访问应用

打开浏览器访问: http://localhost:3000

---

## 📝 使用流程

### 第一步: 登录系统

1. 访问 http://localhost:3000
2. 输入用户名和密码
   - 用户名: `admin`
   - 密码: `admin123`
3. 点击"登录"

### 第二步: 进入模型管理

1. 点击左侧菜单的"评估模型管理"
2. 进入模型版本列表页面

### 第三步: 创建模型版本

1. 点击右上角"新建版本"按钮
2. 填写表单:
   - 版本号: `v1.0`
   - 版本名称: `2025年标准版`
   - 版本描述: `初始版本`
3. 点击"确定"

### 第四步: 编辑模型结构

1. 在版本列表中，点击"编辑结构"按钮
2. 进入节点树编辑器

### 第五步: 添加根节点（序列）

1. 点击"添加根节点"按钮
2. 填写表单:
   - 节点名称: `医生序列`
   - 节点编码: `DOCTOR`
   - 节点类型: `序列`
   - 业务导向: `医生工作量评估`
3. 点击"确定"

### 第六步: 添加子节点（维度）

1. 点击"医生序列"行的"添加子节点"按钮
2. 填写表单:
   - 节点名称: `门诊诊察`
   - 节点编码: `OUTPATIENT`
   - 节点类型: `维度`
   - 计算类型: `统计型`
   - 权重/单价: `0.3000`
   - 业务导向: `门诊工作量统计`
   - 计算脚本: 
     ```sql
     SELECT department_id, COUNT(*) as count 
     FROM outpatient_visits 
     WHERE visit_date >= '{current_year_month}'
     ```
3. 点击"确定"

### 第七步: 测试节点代码（可选）

1. 编辑刚创建的维度节点
2. 在脚本输入框中输入SQL代码
3. 点击"测试运行"按钮
4. 查看测试结果

### 第八步: 激活版本

1. 返回版本列表
2. 点击版本行的"激活"按钮
3. 确认激活操作

---

## 🎯 常用操作

### 复制版本

1. 在版本列表中，点击"复制"按钮
2. 填写新版本信息:
   - 版本号: `v1.1`
   - 版本名称: `2025年标准版-修订`
3. 点击"确定复制"
4. 系统自动复制完整的节点结构

### 编辑节点

1. 在节点树中，点击节点行的"编辑"按钮
2. 修改节点信息
3. 点击"确定"

### 删除节点

1. 在节点树中，点击节点行的"删除"按钮
2. 确认删除操作
3. 注意：删除节点会级联删除所有子节点

### 删除版本

1. 在版本列表中，点击"删除"按钮
2. 确认删除操作
3. 注意：不能删除激活状态的版本

---

## 📸 界面预览

### 版本列表页面

```
┌─────────────────────────────────────────────────────────┐
│ 评估模型管理                          [新建版本]        │
├─────────────────────────────────────────────────────────┤
│ 版本号 │ 版本名称      │ 描述     │ 状态 │ 操作        │
├────────┼───────────────┼──────────┼──────┼─────────────┤
│ v1.0   │ 2025年标准版  │ 初始版本 │ 激活 │ [编辑结构]  │
│        │               │          │      │ [激活]      │
│        │               │          │      │ [复制]      │
│        │               │          │      │ [编辑]      │
│        │               │          │      │ [删除]      │
└────────┴───────────────┴──────────┴──────┴─────────────┘
```

### 节点编辑器页面

```
┌─────────────────────────────────────────────────────────┐
│ [← 返回] 2025年标准版 (v1.0)          [添加根节点]     │
├─────────────────────────────────────────────────────────┤
│ 节点名称   │ 编码      │ 类型 │ 计算类型 │ 权重 │ 操作  │
├────────────┼───────────┼──────┼──────────┼──────┼───────┤
│ ├ 医生序列 │ DOCTOR    │ 序列 │    -     │  -   │ [+]   │
│ │ ├ 门诊   │ OUTPATIENT│ 维度 │ 统计型   │ 0.3  │ [编辑]│
│ │ └ 住院   │ INPATIENT │ 维度 │ 计算型   │ 0.7  │ [删除]│
└────────────┴───────────┴──────┴──────────┴──────┴───────┘
```

---

## ⚠️ 注意事项

### 1. 版本管理

- 同时只能有一个激活版本
- 不能删除激活状态的版本
- 复制版本会复制完整的节点结构

### 2. 节点管理

- 删除节点会级联删除所有子节点
- 节点编码在同一版本内必须唯一
- 序列节点不需要填写权重和脚本
- 维度节点需要选择计算类型

### 3. 代码测试

- 当前测试功能返回模拟数据
- 实际执行功能需要后端支持
- 测试前请确保脚本语法正确

---

## 🐛 常见问题

### Q1: 点击"编辑结构"没有反应？

**A**: 检查浏览器控制台是否有错误，确保后端服务正常运行

### Q2: 创建节点时提示"节点编码已存在"？

**A**: 节点编码在同一版本内必须唯一，请使用不同的编码

### Q3: 无法删除版本？

**A**: 不能删除激活状态的版本，请先激活其他版本

### Q4: 测试代码没有返回结果？

**A**: 当前测试功能返回模拟数据，实际执行功能待后端实现

### Q5: 页面加载很慢？

**A**: 检查网络连接和后端服务状态

---

## 📚 相关文档

- [前端实现文档](./MODEL_FRONTEND_COMPLETED.md)
- [后端实现文档](./MODEL_VERSION_COMPLETED.md)
- [API设计文档](./API设计文档.md)

---

## 🎉 快速体验

### 完整示例：创建一个简单的模型

```bash
# 1. 启动服务
.\scripts\dev-start-backend.ps1
cd frontend && npm run dev

# 2. 访问 http://localhost:3000

# 3. 登录系统 (admin/admin123)

# 4. 创建版本
版本号: v1.0
版本名称: 测试版本

# 5. 添加序列节点
节点名称: 医生序列
节点编码: DOCTOR
节点类型: 序列

# 6. 添加维度节点
节点名称: 门诊诊察
节点编码: OUTPATIENT
节点类型: 维度
计算类型: 统计型
权重: 0.5

# 7. 激活版本
点击"激活"按钮

# 完成！
```

---

**最后更新**: 2025-10-22
