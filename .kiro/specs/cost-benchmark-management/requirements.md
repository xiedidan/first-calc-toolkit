# 需求文档 - 成本基准管理

## 简介

成本基准管理功能用于记录和管理每个科室在特定模型版本下各维度的成本基准值。该功能为医院提供成本控制和绩效评估的参考依据。

## 术语表

- **系统 (System)**: 科室业务价值评估系统
- **成本基准 (Cost Benchmark)**: 特定科室在某个维度下的成本参考值
- **科室 (Department)**: 医院的组织单位
- **维度 (Dimension)**: 模型中的评估维度节点
- **模型版本 (Model Version)**: 评估模型的特定版本
- **医疗机构 (Hospital)**: 使用系统的医院实体

## 需求

### 需求 1：成本基准数据管理

**用户故事：** 作为系统管理员，我想要管理科室的成本基准数据，以便为绩效评估提供参考标准。

#### 验收标准

1. WHEN 用户访问成本基准管理页面 THEN 系统应显示当前医疗机构的成本基准列表
2. WHEN 用户选择模型版本 THEN 系统应筛选并显示该版本下的成本基准数据
3. WHEN 用户选择科室 THEN 系统应筛选并显示该科室的成本基准数据
4. WHEN 用户选择维度 THEN 系统应筛选并显示该维度的成本基准数据
5. WHEN 用户输入关键词搜索 THEN 系统应在科室名称和维度名称中进行模糊匹配

### 需求 2：成本基准创建

**用户故事：** 作为系统管理员，我想要创建新的成本基准记录，以便建立科室的成本参考标准。

#### 验收标准

1. WHEN 用户点击添加按钮 THEN 系统应显示成本基准创建对话框
2. WHEN 用户选择科室、模型版本和维度 THEN 系统应验证这些字段的有效性
3. WHEN 用户输入基准值 THEN 系统应验证数值格式和范围（大于0）
4. WHEN 用户提交创建表单 THEN 系统应保存成本基准记录并关联当前医疗机构
5. WHEN 相同科室、版本和维度的记录已存在 THEN 系统应阻止创建并提示用户

### 需求 3：成本基准编辑

**用户故事：** 作为系统管理员，我想要修改现有的成本基准值，以便根据实际情况调整参考标准。

#### 验收标准

1. WHEN 用户点击编辑按钮 THEN 系统应显示成本基准编辑对话框并预填充当前数据
2. WHEN 用户修改基准值 THEN 系统应验证新值的格式和范围
3. WHEN 用户提交编辑表单 THEN 系统应更新成本基准记录
4. WHEN 用户尝试修改为已存在的科室-版本-维度组合 THEN 系统应阻止更新并提示用户

### 需求 4：成本基准删除

**用户故事：** 作为系统管理员，我想要删除不再需要的成本基准记录，以便保持数据的准确性。

#### 验收标准

1. WHEN 用户点击删除按钮 THEN 系统应显示确认对话框
2. WHEN 用户确认删除 THEN 系统应从数据库中移除该成本基准记录
3. WHEN 删除操作完成 THEN 系统应刷新列表并显示成功消息

### 需求 5：成本基准导出

**用户故事：** 作为系统管理员，我想要导出成本基准数据到Excel文件，以便进行离线分析和备份。

#### 验收标准

1. WHEN 用户点击导出按钮 THEN 系统应生成包含当前筛选条件下所有成本基准数据的Excel文件
2. WHEN Excel文件生成 THEN 系统应包含以下列：科室代码、科室名称、模型版本名称、维度代码、维度名称、基准值、创建时间、更新时间
3. WHEN Excel文件下载 THEN 系统应使用中文文件名并包含导出时间戳
4. WHEN 导出的数据为空 THEN 系统应提示用户没有可导出的数据

### 需求 6：多租户数据隔离

**用户故事：** 作为系统架构师，我想要确保成本基准数据在不同医疗机构之间完全隔离，以便保护数据安全和隐私。

#### 验收标准

1. WHEN 用户查询成本基准列表 THEN 系统应仅返回当前医疗机构的数据
2. WHEN 用户创建成本基准 THEN 系统应自动关联当前医疗机构ID
3. WHEN 用户编辑或删除成本基准 THEN 系统应验证记录属于当前医疗机构
4. WHEN 用户导出数据 THEN 系统应仅导出当前医疗机构的成本基准

### 需求 7：页面样式一致性

**用户故事：** 作为用户，我想要成本基准管理页面与其他模块保持一致的视觉风格，以便获得统一的用户体验。

#### 验收标准

1. WHEN 页面加载 THEN 系统应使用与维度目录管理、数据模板发布相同的布局结构
2. WHEN 显示表格 THEN 系统应使用border、stripe样式和v-loading加载状态
3. WHEN 显示对话框 THEN 系统应使用600px宽度、append-to-body属性和120px标签宽度
4. WHEN 显示搜索表单 THEN 系统应使用search-form类和20px下边距
5. WHEN 显示卡片头部 THEN 系统应使用card-header类并包含标题和操作按钮

### 需求 8：数据验证和错误处理

**用户故事：** 作为系统管理员，我想要系统提供清晰的数据验证和错误提示，以便快速识别和修正问题。

#### 验收标准

1. WHEN 用户提交空的必填字段 THEN 系统应显示字段级别的验证错误
2. WHEN 用户输入无效的基准值（如负数或非数字） THEN 系统应阻止提交并显示错误消息
3. WHEN API请求失败 THEN 系统应显示用户友好的错误消息
4. WHEN 网络请求超时 THEN 系统应提示用户检查网络连接
