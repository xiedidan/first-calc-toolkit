# 应用优化更新

> 快速应用模型管理优化

---

## 🚀 快速步骤（2分钟）

### 1. 执行数据库迁移

```bash
cd backend
python -m alembic upgrade head
```

或双击 **`fix-and-migrate.bat`**

### 2. 重启后端

在后端窗口按 `Ctrl+C`，然后：
```bash
.\scripts\dev-start-backend.ps1
```

### 3. 刷新浏览器

刷新前端页面，完成！

---

## ✨ 新功能

### 1. 节点排序

- 新增"排序序号"字段
- 控制同级节点显示顺序
- 数值越小越靠前

### 2. 末级维度标识

- 新增"是否末级维度"开关
- 只有末级维度才配置权重和脚本
- 末级维度不能添加子节点
- 有子节点的不能设为末级

---

## 📝 使用说明

### 创建节点时

1. 设置排序序号（如 1, 2, 3...）
2. 如果是叶子节点，勾选"是否末级维度"
3. 只有末级维度才需要填写：
   - 计算类型
   - 权重/单价
   - 业务导向
   - 计算脚本

### 编辑节点时

- 如果节点有子节点，"是否末级维度"开关会被禁用
- 如果节点是末级维度，"添加子节点"按钮会被禁用

---

## 🎯 预期效果

### 迁移成功后

```
INFO  [alembic.runtime.migration] Running upgrade g1h2i3j4k5l6 -> h2i3j4k5l6m7, Add sort_order and is_leaf to model_nodes
```

### 界面变化

- 节点列表新增"排序"和"末级维度"列
- 编辑表单新增"排序序号"和"是否末级维度"字段
- 末级维度的"添加子节点"按钮禁用

---

## 📚 详细文档

查看 [OPTIMIZATION_UPDATE.md](./OPTIMIZATION_UPDATE.md) 了解完整说明

---

**预计时间**: 2分钟  
**难度**: ⭐☆☆☆☆
