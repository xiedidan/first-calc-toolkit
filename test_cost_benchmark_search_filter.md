# 成本基准管理 - 搜索筛选功能测试指南

## 测试环境准备

### 1. 启动后端服务
```bash
cd backend
python -m uvicorn app.main:app --reload
```

### 2. 启动前端服务
```bash
cd frontend
npm run dev
```

### 3. 访问页面
打开浏览器访问: `http://localhost:5173/cost-benchmarks`

## 功能测试用例

### 测试用例 1: 模型版本筛选
**步骤**:
1. 打开成本基准管理页面
2. 点击"模型版本"下拉框
3. 选择一个模型版本

**预期结果**:
- 选择后立即触发查询（无需点击查询按钮）
- 表格只显示该版本的成本基准数据
- 页码重置为第1页

### 测试用例 2: 科室筛选
**步骤**:
1. 点击"科室"下拉框
2. 在搜索框中输入科室名称（测试 filterable）
3. 选择一个科室

**预期结果**:
- 下拉框支持搜索过滤
- 选择后立即触发查询
- 表格只显示该科室的成本基准数据
- 页码重置为第1页

### 测试用例 3: 维度筛选
**步骤**:
1. 点击"维度"下拉框
2. 在搜索框中输入维度名称（测试 filterable）
3. 选择一个维度

**预期结果**:
- 下拉框支持搜索过滤
- 选择后立即触发查询
- 表格只显示该维度的成本基准数据
- 页码重置为第1页

### 测试用例 4: 关键词搜索
**步骤**:
1. 在"关键词"输入框中输入科室名称或维度名称的一部分
2. 按回车键

**预期结果**:
- 按回车后触发查询
- 表格显示科室名称或维度名称包含关键词的数据
- 页码重置为第1页

### 测试用例 5: 组合筛选
**步骤**:
1. 选择模型版本
2. 选择科室
3. 选择维度
4. 输入关键词并按回车

**预期结果**:
- 每次选择都触发查询
- 最终表格显示同时满足所有条件的数据
- 如果没有数据，显示空表格

### 测试用例 6: 清空单个筛选条件
**步骤**:
1. 先选择一些筛选条件
2. 点击某个选择器的清空按钮（×）

**预期结果**:
- 该筛选条件被清空
- 立即触发查询
- 表格显示更新后的数据（应该比之前多）

### 测试用例 7: 重置按钮
**步骤**:
1. 选择多个筛选条件
2. 点击"重置"按钮

**预期结果**:
- 所有筛选条件被清空
- 立即触发查询
- 表格显示全部数据
- 页码重置为第1页

### 测试用例 8: 查询按钮
**步骤**:
1. 在关键词输入框中输入内容（不按回车）
2. 点击"查询"按钮

**预期结果**:
- 触发查询
- 表格显示筛选后的数据
- 页码重置为第1页

### 测试用例 9: 分页与筛选配合
**步骤**:
1. 选择筛选条件，确保有多页数据
2. 翻到第2页或第3页
3. 修改筛选条件

**预期结果**:
- 修改筛选条件后，页码自动重置为第1页
- 显示新筛选条件的第1页数据

### 测试用例 10: 改变每页数量
**步骤**:
1. 选择筛选条件
2. 在分页器中改变每页显示数量（如从20改为50）

**预期结果**:
- 页码重置为第1页
- 表格显示更多数据
- 保持筛选条件不变

## 边界测试用例

### 测试用例 11: 筛选结果为空
**步骤**:
1. 选择一个不存在数据的筛选条件组合

**预期结果**:
- 表格显示空状态
- 分页器显示总数为0
- 不报错

### 测试用例 12: 特殊字符搜索
**步骤**:
1. 在关键词输入框中输入特殊字符（如 `%`, `_`, `'`, `"`）
2. 按回车或点击查询

**预期结果**:
- 不报错
- 正确处理特殊字符
- 返回匹配结果或空结果

### 测试用例 13: 长关键词
**步骤**:
1. 在关键词输入框中输入很长的文本（如100个字符）
2. 按回车或点击查询

**预期结果**:
- 不报错
- 正确处理长文本
- 返回结果

### 测试用例 14: 频繁切换筛选条件
**步骤**:
1. 快速连续切换多个筛选条件

**预期结果**:
- 每次切换都触发查询
- 最终显示最后一次筛选的结果
- 不出现请求冲突或数据错乱

## 性能测试用例

### 测试用例 15: 大量数据筛选
**步骤**:
1. 确保数据库中有大量成本基准数据（如1000+条）
2. 不选择任何筛选条件，查看全部数据
3. 逐个添加筛选条件

**预期结果**:
- 查询响应时间在可接受范围内（< 2秒）
- 表格渲染流畅
- 分页正常工作

### 测试用例 16: 下拉选项加载
**步骤**:
1. 打开页面，观察下拉选项的加载

**预期结果**:
- 模型版本、科室、维度选项正确加载
- 选项数量正确
- 选项内容正确

## 用户体验测试

### 测试用例 17: 自动查询体验
**步骤**:
1. 作为普通用户，尝试使用筛选功能

**预期结果**:
- 选择筛选条件后立即看到结果，无需额外操作
- 操作流畅，响应及时
- 符合用户直觉

### 测试用例 18: 清空体验
**步骤**:
1. 选择多个筛选条件
2. 逐个清空筛选条件

**预期结果**:
- 每次清空都立即看到更多数据
- 清空按钮位置明显，易于点击
- 操作反馈及时

### 测试用例 19: 搜索过滤体验
**步骤**:
1. 打开科室下拉框
2. 输入科室名称的一部分

**预期结果**:
- 下拉选项实时过滤
- 过滤结果准确
- 输入体验流畅

## 集成测试用例

### 测试用例 20: 筛选 + 导出
**步骤**:
1. 选择筛选条件
2. 点击"导出Excel"按钮

**预期结果**:
- 导出的Excel文件只包含筛选后的数据
- 文件名包含时间戳
- 数据完整准确

### 测试用例 21: 筛选 + 编辑
**步骤**:
1. 选择筛选条件
2. 编辑某条数据
3. 保存后

**预期结果**:
- 保持筛选条件不变
- 表格刷新，显示更新后的数据
- 如果编辑后的数据不符合筛选条件，从列表中消失

### 测试用例 22: 筛选 + 删除
**步骤**:
1. 选择筛选条件
2. 删除某条数据

**预期结果**:
- 保持筛选条件不变
- 表格刷新，删除的数据消失
- 如果当前页没有数据了，自动跳转到上一页

## 回归测试用例

### 测试用例 23: 不影响其他功能
**步骤**:
1. 测试添加成本基准功能
2. 测试编辑成本基准功能
3. 测试删除成本基准功能
4. 测试导出功能

**预期结果**:
- 所有功能正常工作
- 搜索筛选功能不影响其他功能

## 测试检查清单

- [ ] 模型版本选择器正常工作
- [ ] 科室选择器正常工作
- [ ] 维度选择器正常工作
- [ ] 关键词搜索正常工作
- [ ] 查询按钮正常工作
- [ ] 重置按钮正常工作
- [ ] 选择筛选条件后自动查询
- [ ] 清空筛选条件后自动查询
- [ ] 关键词输入框支持回车查询
- [ ] 所有选择器支持搜索过滤（filterable）
- [ ] 所有选择器支持清空（clearable）
- [ ] 筛选后页码正确重置
- [ ] 组合筛选正常工作
- [ ] 筛选结果为空时正常显示
- [ ] 特殊字符处理正确
- [ ] 性能可接受
- [ ] 用户体验良好
- [ ] 不影响其他功能

## 已知问题

无

## 测试结论

待测试

## 测试人员

待指定

## 测试日期

待定
